#!/usr/bin/env ruby

if ARGV.empty?
  puts
  puts "HELP! Need more commands!"
  puts
  exit
end

name_spaced_task = ARGV.shift.match(/^(\w+)(:*)(\w*)$/)
name_space       = name_spaced_task[1].capitalize

# TODO smarter load path
require "commands/#{name_space.downcase}"

args = ARGV

if name_spaced_task[2] == ":"
  task = name_spaced_task[3]
else
  task = "default"
end

if args.empty?
  Object.const_get(name_space).send(task.to_sym)
else
  Object.const_get(name_space).send(task.to_sym, args)
end
